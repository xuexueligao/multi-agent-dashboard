{
  "version": 3,
  "sources": ["../../../src/cli/integration.ts"],
  "sourcesContent": ["/**\n * Debugging commands for the WorkOS integration; these are unstable, undocumented, and will change or disappear as the WorkOS integration evolves.\n **/\nimport { Command } from \"@commander-js/extra-typings\";\nimport { Context, oneoffContext } from \"../bundler/context.js\";\nimport { chalkStderr } from \"chalk\";\nimport {\n  DeploymentSelectionOptions,\n  deploymentSelectionWithinProjectFromOptions,\n  fetchTeamAndProject,\n  getTeamAndProjectSlugForDeployment,\n  loadSelectedDeploymentCredentials,\n} from \"./lib/api.js\";\nimport { actionDescription } from \"./lib/command.js\";\nimport { ensureHasConvexDependency } from \"./lib/utils/utils.js\";\nimport { getDeploymentSelection } from \"./lib/deploymentSelection.js\";\nimport {\n  ensureWorkosEnvironmentProvisioned,\n  provisionWorkosTeamInteractive,\n} from \"./lib/workos/workos.js\";\nimport {\n  disconnectWorkOSTeam,\n  getCandidateEmailsForWorkIntegration,\n  getDeploymentCanProvisionWorkOSEnvironments,\n  getInvitationEligibleEmails,\n  getWorkosEnvironmentHealth,\n  getWorkosTeamHealth,\n  inviteToWorkosTeam,\n  listProjectWorkOSEnvironments,\n  createProjectWorkOSEnvironment,\n  deleteProjectWorkOSEnvironment,\n} from \"./lib/workos/platformApi.js\";\nimport {\n  logFinishedStep,\n  logMessage,\n  logWarning,\n  showSpinner,\n  stopSpinner,\n} from \"../bundler/log.js\";\nimport { readProjectConfig, getAuthKitConfig } from \"./lib/config.js\";\nimport { promptOptions, promptYesNo } from \"./lib/utils/prompts.js\";\n\nasync function selectEnvDeployment(\n  options: DeploymentSelectionOptions,\n): Promise<{\n  ctx: Context;\n  deployment: {\n    deploymentUrl: string;\n    deploymentName: string;\n    deploymentType: \"dev\" | \"preview\" | \"prod\";\n    adminKey: string;\n    deploymentNotice: string;\n  };\n}> {\n  const ctx = await oneoffContext(options);\n  const deploymentSelection = await getDeploymentSelection(ctx, options);\n  const selectionWithinProject =\n    deploymentSelectionWithinProjectFromOptions(options);\n  const {\n    adminKey,\n    url: deploymentUrl,\n    deploymentFields,\n  } = await loadSelectedDeploymentCredentials(\n    ctx,\n    deploymentSelection,\n    selectionWithinProject,\n  );\n  // WorkOS integration only works with cloud deployments\n  if (!deploymentFields) {\n    return await ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: \"WorkOS integration requires a configured deployment\",\n    });\n  }\n\n  const deploymentNotice = ` (on ${chalkStderr.bold(deploymentFields.deploymentType)} deployment ${chalkStderr.bold(deploymentFields.deploymentName)})`;\n\n  const deploymentType = deploymentFields.deploymentType;\n\n  if (deploymentType === \"custom\") {\n    return await ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: `The WorkOS integration is not available for custom deployments yet.`,\n    });\n  }\n\n  if (\n    deploymentType !== \"dev\" &&\n    deploymentType !== \"preview\" &&\n    deploymentType !== \"prod\"\n  ) {\n    return await ctx.crash({\n      exitCode: 1,\n      errorType: \"fatal\",\n      printedMessage: `The WorkOS integration is only available for cloud deployments (dev, preview, prod), not ${deploymentType}`,\n    });\n  }\n\n  // Now TypeScript knows deploymentType is CloudDeploymentType\n  return {\n    ctx,\n    deployment: {\n      deploymentName: deploymentFields.deploymentName,\n      deploymentType,\n      deploymentUrl,\n      adminKey,\n      deploymentNotice,\n    },\n  };\n}\n\nconst workosTeamStatus = new Command(\"status\")\n  .summary(\"Status of associated WorkOS team and environment\")\n  .addDeploymentSelectionOptions(actionDescription(\"Check WorkOS status for\"))\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const { ctx, deployment } = await selectEnvDeployment(options);\n\n    const info = await fetchTeamAndProject(ctx, deployment.deploymentName);\n\n    // Check team status\n    const teamHealth = await getWorkosTeamHealth(ctx, info.teamId);\n    if (!teamHealth) {\n      logMessage(`WorkOS team: Not provisioned`);\n      const { availableEmails } =\n        await getCandidateEmailsForWorkIntegration(ctx);\n      if (availableEmails.length > 0) {\n        logMessage(\n          `  Verified emails that can provision: ${availableEmails.join(\", \")}`,\n        );\n      }\n    } else if (teamHealth.productionState === \"inactive\") {\n      logMessage(\n        `WorkOS team: ${teamHealth.name} (no credit card added on workos.com, so production auth environments cannot be created)`,\n      );\n    } else {\n      logMessage(`WorkOS team: ${teamHealth.name}`);\n    }\n\n    // Check environment status\n    const envHealth = await getWorkosEnvironmentHealth(\n      ctx,\n      deployment.deploymentName,\n    );\n    if (!envHealth) {\n      logMessage(`WorkOS environment: Not provisioned`);\n    } else {\n      logMessage(`WorkOS environment: ${envHealth.name}`);\n      const workosUrl = `https://dashboard.workos.com/${envHealth.id}/authentication`;\n      logMessage(`${workosUrl}`);\n    }\n\n    try {\n      const { projectConfig } = await readProjectConfig(ctx);\n      const authKitConfig = await getAuthKitConfig(ctx, projectConfig);\n\n      if (!authKitConfig) {\n        logMessage(\n          `AuthKit config: ${chalkStderr.dim(\"Not configured in convex.json\")}`,\n        );\n      } else {\n        logMessage(`AuthKit config:`);\n\n        // Show config for each deployment type\n        for (const deploymentType of [\"dev\", \"preview\", \"prod\"] as const) {\n          const envConfig = authKitConfig[deploymentType];\n          if (!envConfig) {\n            logMessage(\n              `  ${deploymentType}: ${chalkStderr.dim(\"not configured\")}`,\n            );\n            continue;\n          }\n\n          // Build description based on what's configured\n          let description = \"\";\n\n          // Show environment type for prod deployments\n          if (deploymentType === \"prod\" && envConfig.environmentType) {\n            description = `environment type: ${envConfig.environmentType}`;\n          }\n\n          const configureStatus =\n            envConfig.configure === false\n              ? \", configure: disabled\"\n              : envConfig.configure\n                ? \", will configure WorkOS\"\n                : \"\";\n\n          const localEnvVarsStatus =\n            envConfig.localEnvVars === false\n              ? \"\"\n              : envConfig.localEnvVars\n                ? `, ${Object.keys(envConfig.localEnvVars).length} local env vars`\n                : \"\";\n\n          // Show deployment type with its configuration\n          const configInfo = [description, configureStatus, localEnvVarsStatus]\n            .filter((s) => s)\n            .join(\"\");\n\n          logMessage(`  ${deploymentType}: ${configInfo || \"configured\"}`);\n        }\n      }\n    } catch (error) {\n      logMessage(\n        `AuthKit config: ${chalkStderr.yellow(`Error reading config: ${String(error)}`)}`,\n      );\n    }\n  });\n\nconst workosProvisionEnvironment = new Command(\"provision-environment\")\n  .summary(\"Provision a WorkOS environment\")\n  .description(\n    \"Create or get the WorkOS environment and API key for this deployment\",\n  )\n  .configureHelp({ showGlobalOptions: true })\n  .allowExcessArguments(false)\n  .addDeploymentSelectionOptions(\n    actionDescription(\"Provision WorkOS environment for\"),\n  )\n  .option(\n    \"--name <name>\",\n    \"Custom name for the WorkOS environment (if not provided, uses deployment name)\",\n  )\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const { ctx, deployment } = await selectEnvDeployment(options);\n    await ensureHasConvexDependency(\n      ctx,\n      \"integration workos provision-environment\",\n    );\n\n    try {\n      const { projectConfig } = await readProjectConfig(ctx);\n      const authKitConfig = await getAuthKitConfig(ctx, projectConfig);\n      const config = authKitConfig || { dev: {} };\n\n      if (!authKitConfig) {\n        logWarning(\n          \"Consider using the 'authKit' config in convex.json for automatic provisioning.\",\n        );\n        logMessage(\n          \"Learn more at https://docs.convex.dev/auth/authkit/auto-provision\",\n        );\n        logMessage(\"\");\n      }\n\n      await ensureWorkosEnvironmentProvisioned(\n        ctx,\n        deployment.deploymentName,\n        deployment,\n        config,\n        deployment.deploymentType,\n      );\n    } catch (error) {\n      await ctx.crash({\n        exitCode: 1,\n        errorType: \"fatal\",\n        errForSentry: error,\n        printedMessage: `Failed to provision WorkOS environment: ${String(error)}`,\n      });\n    }\n  });\n\nconst workosProvisionTeam = new Command(\"provision-team\")\n  .summary(\"Provision a WorkOS team for this Convex team\")\n  .description(\n    \"Create a WorkOS team and associate it with this Convex team. \" +\n      \"This enables automatic provisioning of WorkOS environments for deployments on this team.\",\n  )\n  .configureHelp({ showGlobalOptions: true })\n  .allowExcessArguments(false)\n  .addDeploymentSelectionOptions(actionDescription(\"Provision WorkOS team for\"))\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const { ctx, deployment } = await selectEnvDeployment(options);\n\n    // Check if there's already an associated WorkOS team\n    const { hasAssociatedWorkosTeam, teamId } =\n      await getDeploymentCanProvisionWorkOSEnvironments(\n        ctx,\n        deployment.deploymentName,\n      );\n\n    if (hasAssociatedWorkosTeam) {\n      logMessage(\n        chalkStderr.yellow(\n          \"This Convex team already has an associated WorkOS team.\",\n        ),\n      );\n      logMessage(\n        chalkStderr.dim(\n          \"Use 'npx convex integration workos status' to view details.\",\n        ),\n      );\n      return;\n    }\n\n    // Use the shared provisioning flow\n    const result = await provisionWorkosTeamInteractive(\n      ctx,\n      deployment.deploymentName,\n      teamId,\n      deployment.deploymentType,\n    );\n\n    if (!result.success) {\n      logMessage(chalkStderr.gray(\"Cancelled.\"));\n      return;\n    }\n\n    // Success!\n    logMessage(\n      chalkStderr.green(\n        `\\n\u2713 Successfully created WorkOS team \"${result.workosTeamName}\" (${result.workosTeamId})`,\n      ),\n    );\n    logMessage(\n      chalkStderr.dim(\n        \"You can now provision WorkOS environments for deployments on this team.\",\n      ),\n    );\n  });\n\nconst workosDisconnectTeam = new Command(\"disconnect-team\")\n  .summary(\"Disconnect WorkOS team from Convex team\")\n  .description(\n    \"Remove the associated WorkOS team from this Convex team. \" +\n      \"This is a destructive action that will prevent new WorkOS environments from being provisioned. \" +\n      \"Existing environments will continue to work with their current API keys.\",\n  )\n  .configureHelp({ showGlobalOptions: true })\n  .allowExcessArguments(false)\n  .addDeploymentSelectionOptions(\n    actionDescription(\"Disconnect WorkOS team for\"),\n  )\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const { ctx, deployment } = await selectEnvDeployment(options);\n\n    // Check if there's an associated WorkOS team\n    const { hasAssociatedWorkosTeam, teamId } =\n      await getDeploymentCanProvisionWorkOSEnvironments(\n        ctx,\n        deployment.deploymentName,\n      );\n\n    if (!hasAssociatedWorkosTeam) {\n      logMessage(\n        chalkStderr.yellow(\n          \"This Convex team does not have an associated WorkOS team.\",\n        ),\n      );\n      return;\n    }\n\n    const info = await getTeamAndProjectSlugForDeployment(ctx, {\n      deploymentName: deployment.deploymentName,\n    });\n\n    logMessage(\n      chalkStderr.yellow(\n        `Warning: This will disconnect the WorkOS team from Convex team \"${info?.teamSlug}\".`,\n      ),\n    );\n    logMessage(\n      \"AuthKit environments provisioned for Convex deployments on this team will no longer use this WorkOS team to provision environments.\",\n    );\n    logMessage(\n      chalkStderr.dim(\n        \"Existing WorkOS environments will continue to work with their current API keys.\",\n      ),\n    );\n\n    const confirmed = await promptYesNo(ctx, {\n      message: \"Are you sure you want to disconnect this WorkOS team?\",\n      default: false,\n    });\n\n    if (!confirmed) {\n      logMessage(chalkStderr.gray(\"Cancelled.\"));\n      return;\n    }\n\n    const result = await disconnectWorkOSTeam(ctx, teamId);\n\n    if (!result.success) {\n      if (result.error === \"not_associated\") {\n        logMessage(\n          chalkStderr.yellow(\n            \"This Convex team does not have an associated WorkOS team.\",\n          ),\n        );\n        return;\n      }\n      return await ctx.crash({\n        exitCode: 1,\n        errorType: \"fatal\",\n        printedMessage: `Failed to disconnect WorkOS team: ${result.message}`,\n      });\n    }\n\n    logFinishedStep(\n      `Successfully disconnected WorkOS team \"${result.workosTeamName}\" (${result.workosTeamId})`,\n    );\n  });\n\nconst workosInvite = new Command(\"invite\")\n  .summary(\"Invite yourself to the WorkOS team\")\n  .description(\n    \"Send an invitation to join the WorkOS team associated with your Convex team\",\n  )\n  .option(\"--email <email>\", \"Email address to invite (skips validation)\")\n  .configureHelp({ showGlobalOptions: true })\n  .allowExcessArguments(false)\n  .addDeploymentSelectionOptions(\n    actionDescription(\"Invite yourself to WorkOS team for\"),\n  )\n  .action(async (options, cmd) => {\n    const allOptions = cmd.optsWithGlobals();\n    const { ctx, deployment } = await selectEnvDeployment(allOptions);\n\n    // Get team info first\n    const info = await fetchTeamAndProject(ctx, deployment.deploymentName);\n\n    let emailToInvite: string;\n\n    // If email was provided as flag, use it directly (skip CLI validation)\n    if (options.email) {\n      emailToInvite = options.email;\n    } else {\n      // Get emails eligible for invitation (all verified emails except those that are admin of a different team)\n      const { eligibleEmails, adminEmail } = await getInvitationEligibleEmails(\n        ctx,\n        info.teamId,\n      );\n\n      // Combine eligible emails with admin email (admin email is always an option for re-invitation)\n      const allInvitableEmails = [...eligibleEmails];\n      if (adminEmail && !allInvitableEmails.includes(adminEmail)) {\n        allInvitableEmails.push(adminEmail);\n      }\n\n      if (allInvitableEmails.length === 0) {\n        logMessage(\n          \"You don't have any verified emails available for invitation.\",\n        );\n        logMessage(\n          \"This could be because all your verified emails are already admin of other WorkOS teams.\",\n        );\n        return;\n      }\n\n      // Let user select which email to use\n      emailToInvite = await promptOptions(ctx, {\n        message: \"Which email would you like to invite to the WorkOS team?\",\n        choices: allInvitableEmails.map((email) => ({\n          name: email + (email === adminEmail ? \" (admin email)\" : \"\"),\n          value: email,\n        })),\n        default: allInvitableEmails[0],\n      });\n\n      // Confirm before sending\n      const confirmed = await promptYesNo(ctx, {\n        message: `Send invitation to ${emailToInvite}?`,\n        default: true,\n      });\n\n      if (!confirmed) {\n        logMessage(\"Invitation cancelled.\");\n        return;\n      }\n    }\n\n    logMessage(`Sending invitation to ${emailToInvite}...`);\n\n    const result = await inviteToWorkosTeam(ctx, info.teamId, emailToInvite);\n\n    if (result.result === \"success\") {\n      logMessage(\n        `\u2713 Successfully sent invitation to ${result.email} with role ${result.roleSlug}`,\n      );\n      logMessage(\n        \"Check your email for the invitation link to join the WorkOS team.\",\n      );\n    } else if (result.result === \"teamNotProvisioned\") {\n      logMessage(\n        `\u2717 ${result.message}. Run 'npx convex integration workos provision-environment' first.`,\n      );\n    } else if (result.result === \"alreadyInWorkspace\") {\n      logMessage(\n        `\u2717 ${result.message}. This usually means the email is already used in another WorkOS workspace.`,\n      );\n    }\n  });\n\n// Project environment commands\nconst workosProjectEnvList = new Command(\"list-project-environments\")\n  .summary(\"List WorkOS environments for current project\")\n  .description(\n    \"List all WorkOS AuthKit environments created for the current project.\\n\" +\n      \"These environments can be used across multiple deployments.\",\n  )\n  .addDeploymentSelectionOptions(\n    actionDescription(\"List project environments for\"),\n  )\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const { ctx, deployment } = await selectEnvDeployment(options);\n\n    const info = await fetchTeamAndProject(ctx, deployment.deploymentName);\n\n    logMessage(\"Fetching project WorkOS environments...\");\n\n    try {\n      const environments = await listProjectWorkOSEnvironments(\n        ctx,\n        info.projectId,\n      );\n\n      if (environments.length === 0) {\n        logMessage(\"No WorkOS environments found for this project.\");\n        logMessage(\n          chalkStderr.gray(\n            \"Create one with: npx convex integration workos create-project-environment --name <name>\",\n          ),\n        );\n      } else {\n        logMessage(chalkStderr.bold(\"WorkOS Project Environments:\"));\n        for (const env of environments) {\n          const prodLabel = env.isProduction\n            ? chalkStderr.yellow(\" (production)\")\n            : \"\";\n          logMessage(\n            `  ${chalkStderr.green(env.userEnvironmentName)}${prodLabel} - Client ID: ${env.workosClientId}`,\n          );\n        }\n      }\n    } catch (error) {\n      logMessage(\n        chalkStderr.red(`Failed to list environments: ${String(error)}`),\n      );\n    }\n  });\n\nconst workosProjectEnvCreate = new Command(\"create-project-environment\")\n  .summary(\"Create a new WorkOS environment for the project\")\n  .description(\n    \"Create a new WorkOS AuthKit environment for this project.\\n\" +\n      \"The environment can be used across multiple deployments.\",\n  )\n  .requiredOption(\"--name <name>\", \"Name for the new environment\")\n  .option(\"--production\", \"Mark this environment as a production environment\")\n  .addDeploymentSelectionOptions(\n    actionDescription(\"Create project environment for\"),\n  )\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const environmentName = options.name as string;\n    const isProduction = options.production as boolean | undefined;\n    const { ctx, deployment } = await selectEnvDeployment(options);\n\n    const info = await fetchTeamAndProject(ctx, deployment.deploymentName);\n\n    showSpinner(\n      `Creating project-level WorkOS environment '${environmentName}'...`,\n    );\n\n    try {\n      const response = await createProjectWorkOSEnvironment(\n        ctx,\n        info.projectId,\n        environmentName,\n        isProduction,\n      );\n\n      stopSpinner();\n      logFinishedStep(`Created WorkOS environment '${environmentName}'`);\n\n      logMessage(\"\");\n      logMessage(chalkStderr.bold(\"Environment Details:\"));\n      logMessage(`  Name: ${response.userEnvironmentName}`);\n      logMessage(`  Client ID: ${response.workosClientId}`);\n      logMessage(`  API Key: ${response.workosApiKey}`);\n    } catch (error: any) {\n      stopSpinner();\n      if (error?.message?.includes(\"NoWorkOSTeam\")) {\n        logMessage(\n          chalkStderr.red(\n            \"Your team doesn't have a WorkOS integration configured yet.\",\n          ),\n        );\n        logMessage(\n          \"Please run 'npx convex integration workos provision-team' first.\",\n        );\n      } else if (error?.message?.includes(\"duplicate\")) {\n        logMessage(\n          chalkStderr.red(\n            `An environment named '${environmentName}' already exists for this project.`,\n          ),\n        );\n      } else if (error?.message?.includes(\"TooManyEnvironments\")) {\n        logMessage(\n          chalkStderr.red(\n            \"You've reached the limit of 10 WorkOS environments per project. If you need more, please contact support.\",\n          ),\n        );\n      } else {\n        logMessage(chalkStderr.red(`Failed to create environment: ${error}`));\n      }\n    }\n  });\n\nconst workosProjectEnvDelete = new Command(\"delete-project-environment\")\n  .summary(\"Delete a WorkOS environment from the project\")\n  .description(\n    \"Delete a WorkOS environment from this project.\\n\" +\n      \"This will permanently remove the environment and its credentials.\\n\" +\n      \"Use the client ID shown in list-project-environments output.\",\n  )\n  .requiredOption(\n    \"--client-id <clientId>\",\n    \"WorkOS client ID of the environment to delete (shown in list output)\",\n  )\n  .addDeploymentSelectionOptions(\n    actionDescription(\"Delete project environment for\"),\n  )\n  .action(async (_options, cmd) => {\n    const options = cmd.optsWithGlobals();\n    const clientId = options.clientId as string;\n    const { ctx, deployment } = await selectEnvDeployment(options);\n\n    const info = await fetchTeamAndProject(ctx, deployment.deploymentName);\n\n    // Confirm deletion\n    const confirmed = await promptYesNo(ctx, {\n      message: `Are you sure you want to delete environment with client ID '${clientId}'?`,\n      default: false,\n    });\n\n    if (!confirmed) {\n      logMessage(\"Deletion cancelled.\");\n      return;\n    }\n\n    showSpinner(\n      `Deleting project WorkOS environment (this can take a while)...`,\n    );\n\n    try {\n      await deleteProjectWorkOSEnvironment(ctx, info.projectId, clientId);\n      stopSpinner();\n      logFinishedStep(`Deleted environment with client ID '${clientId}'`);\n    } catch (error: any) {\n      stopSpinner();\n      if (error?.message?.includes(\"not found\")) {\n        logMessage(\n          chalkStderr.red(\n            `Environment with client ID '${clientId}' not found.`,\n          ),\n        );\n      } else {\n        logMessage(chalkStderr.red(`Failed to delete environment: ${error}`));\n      }\n    }\n  });\n\nconst workos = new Command(\"workos\")\n  .summary(\"WorkOS integration commands\")\n  .description(\"Manage WorkOS team provisioning and environment setup\")\n  .addCommand(workosProvisionEnvironment)\n  .addCommand(workosTeamStatus)\n  .addCommand(workosProvisionTeam)\n  .addCommand(workosDisconnectTeam)\n  .addCommand(workosInvite)\n  .addCommand(workosProjectEnvList)\n  .addCommand(workosProjectEnvCreate)\n  .addCommand(workosProjectEnvDelete);\n\nexport const integration = new Command(\"integration\")\n  .summary(\"Integration commands\")\n  .description(\"Commands for managing third-party integrations\")\n  .addCommand(workos);\n"],
  "mappings": "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",
  "names": []
}
